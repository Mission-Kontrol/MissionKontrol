<% if table_has_layout?(@current_table) %>
  <div class="column-visibility-settings-modal-trigger-wrapper">
    <a href="#" data-toggle="modal" data-target="#column-visibility-settings-modal" id="column-visibility-settings-modal-trigger">
      <i class="fa fa-columns" aria-hidden="true"></i> Columns
    </a>
  </div>
<% end %>

<div class="table-responsive" >
  <table class="footable table" data-filtering="true"  data-sorting="true" data-paging="true" data-table-name='<%= current_table %>' data-filter-position="left">
    <thead>
      <tr>
        <% @headers.each do |header|%>
          <% @column_is_hidden = @hidden_columns.include?(header) %>

          <% if @column_is_hidden %>
            <th class='column-<%= header %> hide'><%= header.humanize %></th>
          <% else %>
            <th class='column-<%= header %>'><%= header.humanize %></th>
          <% end %>
        <% end %>
      </tr>
    </thead>

    <tbody>
      <% @rows.each do |r|%>
        <tr class="clickable-row" data-href='<%= table_record_preview_path(table: @target_db_repo.table, table_name: @target_db_repo.table.downcase, record_id: r['id']) %>'>
          <% if table_has_layout?(@current_table) %>
            <%= render 'table_with_layout', r: r, hidden_columns: @hidden_columns %>
          <% else %>
            <%= render 'table_without_layout', r: r, hidden_columns: @hidden_columns %>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
