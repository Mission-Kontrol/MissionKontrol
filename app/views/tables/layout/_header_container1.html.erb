<% fields_for_header_container1(layout_builder).each do |index, field| %>
  <% if field["table"] == @current_table %>
    <% @current_row = @row %>
  <% else %>
    <% @current_row = get_related_row(@current_table, field["table"], @row["id"]) %>
  <% end %>

  <% if field["editable"] == "true" %>
    <div class="row editable-row">
      <div class="col-xs-12">
        <div class="editable-content-wrapper">
          <% if @current_row &&  !@current_row[field["title"]].blank? %>
            <p class="editable-content header-container1-content" onclick="showEditable(event);">
              <%= @current_row[field["title"]] %>
            </p>
          <% else %>
            <p class="editable-content header-container1-content" onclick="showEditable(event);">--</p>
          <% end %>
        </div>

        <div class="editable-input">
          <% if @current_row %>

            <% if field["table"] == @current_table %>
              <% if field["kind"] == 'integer' %>
                <input type="number" class="form-control" value="<%= @current_row.nil? ? "" : @current_row[field["title"]] %>" data-table="<%= field["table"] %>" data-field="<%= field["title"] %>" data-id="<%= params[:record_id] %>">
              <% else %>
                <input type="text" class="form-control" value="<%= @current_row.nil? ? "" : @current_row[field["title"]] %>" data-table="<%= field["table"] %>" data-field="<%= field["title"] %>" data-id="<%= params[:record_id] %>">
              <% end %>
            <% else %>
              <% if field["kind"] == 'integer' %>
                <input type="number" class="form-control" value="<%= @current_row.nil? ? "" : @current_row[field["title"]] %>" data-table="<%= field["table"] %>" data-field="<%= field["title"] %>" data-id="<%= params[:record_id] %>" data-foreign-key-title="<%= get_foreign_key(@current_table) %>" data-foreign-key-value="<%= params[:record_id] %>">
              <% else %>
                <input type="text" class="form-control" value="<%= @current_row.nil? ? "" : @current_row[field["title"]] %>" data-table="<%= field["table"] %>" data-field="<%= field["title"] %>" data-foreign-key-title="<%= get_foreign_key(@current_table) %>" data-foreign-key-value="<%= params[:record_id] %>">
              <% end %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  <% else %>
    <div class="">
      <% if @current_row &&  !@current_row[field["title"]].blank? %>
        <p class="header-container1-content">
          <%= @current_row[field["title"]] %>
        </p>
      <% else %>
        <p class="header-container1-content">--</p>
      <% end %>
    </div>
  <% end %>
<% end  %>
