<%= render 'shared/page_banner_header', title: 'Settings', items: ['Settings', 'General'] %>

<div class="wrapper wrapper-content animated">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-content">
          <div class="row">
            <div class="col-lg-12">
              <div class="tabs-container">
                <ul class="nav nav-tabs" role="tablist">
                  <li class="active"><a class="nav-link active" data-toggle="tab" href="#settings-tab--general">General</a></li>
                  <li><a class="nav-link" data-toggle="tab" href="#settings-tab--target">Target database</a></li>
                  <li><a class="nav-link" data-toggle="tab" href="#settings-tab--license">License key</a></li>
                </ul>
                <div class="tab-content">
                  <div role="tabpanel" id="settings-tab--general" class="tab-pane active">
                    <div class="panel-body">
                      <p>These are general settings for your installation</p>

                      <%= form_for(current_organisation, remote: true) do |f| %>
                        <div class="form-group">
                          <%= f.label :company_name %>
                          <%= f.text_field :company_name, class: "form-control" %>
                        </div>

                        <%= f.submit "Submit", class: "btn btn-primary m-b pull-right" %>
                      <% end %>
                    </div>
                  </div>

                  <div role="tabpanel" id="settings-tab--target" class="tab-pane">
                    <div class="panel-body">
                      <p>These are your application's database settings</p>
                      <%= form_for(current_organisation, html: { method: :put, class: "m-t" }, remote: true) do |f| %>

                        <div class="form-group">
                          <label for="">Database type</label>
                          <%= f.select(:target_database_type, OrganisationSetting::DATABASE_TYPES,
                                                              {prompt: "Select your database type"},
                                                              {class: 'form-control'}) %>
                        </div>

                        <div class="form-group">
                          <%= f.label :target_database_name %>
                          <%= f.text_field :target_database_name, autofocus: true, class: "form-control" %>
                        </div>

                        <div class="form-group">
                          <%= f.label :target_database_username %>
                          <%= f.text_field :target_database_username, autofocus: true, class: "form-control" %>
                        </div>

                        <div class="form-group">
                          <%= f.label :target_database_password %>
                          <%= f.password_field :target_database_password, autofocus: true, class: "form-control", required: true %>
                        </div>

                        <div class="form-group">
                          <%= f.label :target_database_host %>
                          <%= f.text_field :target_database_host, autofocus: true, class: "form-control" %>
                        </div>

                        <div class="form-group">
                          <%= f.label :target_database_port %>
                          <%= f.text_field :target_database_port, autofocus: true, class: "form-control" %>
                        </div>

                        <%= f.submit "Submit", class: "btn btn-primary m-b pull-right" %>
                      <% end %>
                    </div>
                  </div>

                  <div role="tabpanel" id="settings-tab--license" class="tab-pane">
                    <div class="panel-body">
                      <p>License key</p>

                      <%= form_for(current_organisation, remote: true) do |f| %>
                        <div class="form-group">
                          <%= f.label :license_key %>
                          <%= f.text_field :license_key, class: "form-control" %>
                        </div>

                        <%= f.submit "Submit", class: "btn btn-primary m-b pull-right" %>
                      <% end %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
